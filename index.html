<!DOCTYPE html>ã€€
<html lang="ja">
<head>
<meta charset="UTF-8">
<title>English Pronunciation Trainer</title>

<style>
body {
    font-family: sans-serif;
    background: #f4f7f6;
    text-align: center;
    padding: 40px;
}

.card {
    background: white;
    padding: 30px;
    border-radius: 15px;
    box-shadow: 0 6px 10px rgba(0,0,0,0.1);
    max-width: 500px;
    margin: auto;
}

h1 { color: #2c3e50; }

.target-word {
    font-size: 1.8em;
    color: #3498db;
    font-weight: bold;
    margin: 15px 0;
}

button {
    padding: 12px 22px;
    font-size: 1em;
    cursor: pointer;
    border-radius: 8px;
    border: none;
    margin: 10px;
    background: #2ecc71;
    color: white;
}

button:hover { background: #27ae60; }

#score {
    font-size: 1.4em;
    font-weight: bold;
    margin-top: 15px;
}

#result {
    margin-top: 15px;
    text-align: left;
}

.word {
    padding: 6px 10px;
    margin: 5px 0;
    border-radius: 6px;
}

.correct { background: #d5f5e3; color: #1e8449; }
.wrong { background: #fadbd8; color: #922b21; }
</style>
</head>

<body>
<div class="card">
    <h1>ç™ºéŸ³ãƒã‚§ãƒƒã‚¯ãã‚“</h1>
    <p>ã“ã®ãƒ•ãƒ¬ãƒ¼ã‚ºã‚’ä¸€æ°—ã«ç™ºéŸ³ã—ã¦ã­ï¼š</p>

    <div class="target-word" id="targetText">good morning</div>

    <button onclick="playModel()">ğŸ”Š ãŠæ‰‹æœ¬ã‚’èã</button><br>
    <button onclick="startCheck()">ğŸ¤ ç™ºéŸ³ãƒã‚§ãƒƒã‚¯</button>

    <div id="score"></div>
    <div id="result"></div>
</div>

<script>
const targetDiv = document.getElementById("targetText");
const resultDiv = document.getElementById("result");
const scoreDiv = document.getElementById("score");

function playModel() {
    const u = new SpeechSynthesisUtterance(targetDiv.innerText);
    u.lang = "en-US";
    speechSynthesis.speak(u);
}

function startCheck() {
    const targetWords = targetDiv.innerText.toLowerCase().split(" ");

    const recognition = new (window.SpeechRecognition || window.webkitSpeechRecognition)();
    recognition.lang = "en-US";

    scoreDiv.innerHTML = "";
    resultDiv.innerHTML = "ğŸ‘‚ èãå–ã‚Šä¸­â€¦";

    recognition.onresult = (event) => {
        const spokenText = event.results[0][0].transcript.toLowerCase();
        const spokenWords = spokenText.split(" ");

        let correctCount = 0;
        let html = `<p>èªè­˜çµæœ: "${spokenText}"</p>`;

        targetWords.forEach((word, index) => {
            const spoken = spokenWords[index] || "";
            const correct = spoken === word;

            if (correct) correctCount++;

            html += `
                <div class="word ${correct ? "correct" : "wrong"}">
                    ${word} â†’ ${spoken || "ï¼ˆæœªèªè­˜ï¼‰"}
                </div>
            `;
        });

        const accuracy = Math.round((correctCount / targetWords.length) * 100);

        scoreDiv.innerHTML = `ğŸ“Š æ­£ç¢ºæ€§ï¼š${accuracy}%`;
        resultDiv.innerHTML = html;
    };

    recognition.onerror = () => {
        resultDiv.innerHTML = "âš  ãƒã‚¤ã‚¯ã®ä½¿ç”¨ã‚’è¨±å¯ã—ã¦ãã ã•ã„ã€‚";
    };

    recognition.start();
}
</script>
</body>
</html>
